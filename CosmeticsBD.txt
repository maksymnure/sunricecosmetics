use cosmetics;
CREATE TABLE Client_status
(
	id_client_status int primary key IDENTITY(1,1),
	name varchar(20)  NOT NULL UNIQUE
);

CREATE TABLE Client
(
	id_client int primary key IDENTITY(1,1),
	name varchar(20)  NOT NULL ,
	phone varchar(13)  NOT NULL ,
	surname varchar(20)  NOT NULL ,
	middlename varchar(20)  NOT NULL ,
	birthday date  NOT NULL ,
	city varchar(20)  NOT NULL ,
	login varchar(20)  NOT NULL UNIQUE ,
	password varchar(20)  NOT NULL ,
	id_client_status int  NOT NULL,
	foreign key (id_client_status) references Client_status(id_client_status)
);

CREATE TABLE Catalog
(
	id_catalog int primary key IDENTITY(1,1),
	id_parent int,
	name varchar(50)  NOT NULL,
	FOREIGN KEY (id_parent) REFERENCES Catalog(id_catalog)
);

CREATE TABLE Company
(
	id_company int primary key IDENTITY(1,1),
	name varchar(50)  NOT NULL ,
	country varchar(50)  NOT NULL ,
	email varchar(50)  NOT NULL,
);

CREATE TABLE Product
(
	id_product int primary key IDENTITY(1,1),
	title varchar(50)  NOT NULL ,
	id_catalog int NOT NULL,
	price money check(price > 0) ,
	amount int check(amount > 0)  NOT NULL ,
	id_company int  NOT NULL ,
	description varchar(500)  NOT NULL,
	img_small varchar(100),
	img_big varchar(100),
	foreign key(id_company) references Company(id_company),
	foreign key(id_catalog) references Catalog(id_catalog)

);

CREATE TABLE Product_Catalog
(
	id_product int  NOT NULL ,
	id_catalog int  NOT NULL,
	constraint pk_product_catalog primary key (id_product, id_catalog),
	foreign key (id_product) references Product(id_product),
	foreign key (id_catalog) references Catalog(id_catalog)

);

CREATE TABLE Receipt_status
(
	id_receipt_status int  NOT NULL IDENTITY(1,1),
	name varchar(50)  NOT NULL,
	primary key(id_receipt_status)
);

CREATE TABLE Delivery
(
	id_delivery int NOT NULL ,
	name varchar(20)  NOT NULL,
	primary key (id_delivery)
);


CREATE TABLE Receipt
(
	id_client int NOT NULL ,
	number int IDENTITY(1,1),
	id_receipt_status int  NOT NULL ,
	data datetime not null,
	primary key (number),
	foreign key (id_receipt_status) references Receipt_status(id_receipt_status),
	foreign key (id_client) references Client(id_client)

);

CREATE TABLE Receipt_has_product
(
	id_receipt int  NOT NULL ,
	id_product int  NOT NULL ,
	quantity int NOT NULL ,
	price money check(price > 0),
	primary key(id_receipt, id_product),
	foreign key (id_receipt) references Receipt(number),
	foreign key (id_product) references Product(id_product)
);

